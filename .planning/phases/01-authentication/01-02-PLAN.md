---
phase: 01-authentication
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - app/(auth)/login/page.tsx
  - app/(auth)/signup/page.tsx
  - components/logout-button.tsx
autonomous: true

must_haves:
  truths:
    - "User can access login page at /login"
    - "User can access signup page at /signup"
    - "Login form submits to server action and handles errors"
    - "Signup form submits to server action and handles errors"
    - "Google OAuth button initiates OAuth flow"
    - "Magic link form sends email"
  artifacts:
    - path: "app/(auth)/login/page.tsx"
      provides: "Login page with email/password, Google, magic link options"
      min_lines: 50
    - path: "app/(auth)/signup/page.tsx"
      provides: "Signup page with email/password form"
      min_lines: 40
    - path: "components/logout-button.tsx"
      provides: "Reusable logout button component"
      exports: ["LogoutButton"]
  key_links:
    - from: "app/(auth)/login/page.tsx"
      to: "lib/actions/auth.ts"
      via: "server action imports"
      pattern: "import.*login.*signInWithGoogle.*signInWithMagicLink.*from.*actions/auth"
    - from: "app/(auth)/signup/page.tsx"
      to: "lib/actions/auth.ts"
      via: "server action import"
      pattern: "import.*signup.*from.*actions/auth"
    - from: "components/logout-button.tsx"
      to: "lib/actions/auth.ts"
      via: "logout action import"
      pattern: "import.*logout.*from.*actions/auth"
---

<objective>
Create the authentication UI pages: login page with multiple auth methods, signup page, and logout button component.

Purpose: Provides user-facing auth forms that connect to the server actions from Plan 01.
Output: Working /login and /signup pages with forms, OAuth buttons, and error handling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-authentication/01-RESEARCH.md
@.planning/phases/01-authentication/01-01-SUMMARY.md

Existing UI components (verified):
- components/ui/button.tsx - Button with variants (default, outline, secondary, ghost, destructive, link)
- components/ui/input.tsx - Input component
- components/ui/label.tsx - Label component
- components/ui/card.tsx - Card, CardHeader, CardContent, CardTitle

Server actions available (from Plan 01):
- login(formData) - Email/password login
- signup(formData) - Email/password signup
- signInWithGoogle() - Google OAuth
- signInWithMagicLink(formData) - Magic link
- logout() - Sign out
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create login page</name>
  <files>app/(auth)/login/page.tsx</files>
  <action>
Create app/(auth)/login/page.tsx with these features:

1. **Layout**: Centered card on full-height screen
2. **URL params**: Read `message` and `error` from searchParams to show feedback
3. **Email/password form**:
   - Email input (type="email", name="email", required)
   - Password input (type="password", name="password", required)
   - Submit button using `formAction={login}`
4. **Divider**: "Or" separator between auth methods
5. **Google OAuth**: Button with `formAction={signInWithGoogle}`
6. **Magic link section**:
   - Email input (name="email", placeholder for magic link)
   - Button with `formAction={signInWithMagicLink}`
7. **Link to signup**: "Don't have an account? Sign up"

Use existing components: Card, CardHeader, CardContent, CardTitle, Button, Input, Label.

Handle async searchParams (Next.js 15):
```typescript
export default async function LoginPage({
  searchParams,
}: {
  searchParams: Promise<{ message?: string; error?: string }>
}) {
  const { message, error } = await searchParams
  // ...
}
```

Style notes:
- Card max-width: max-w-md
- Spacing: space-y-4 for form sections
- Message: text-sm text-green-600
- Error: text-sm text-red-600
- Divider pattern: relative with absolute span containing "Or"
  </action>
  <verify>
```bash
test -f app/\(auth\)/login/page.tsx && grep -c "formAction" app/\(auth\)/login/page.tsx
```
Should show at least 3 formAction usages (login, Google, magic link).
  </verify>
  <done>Login page renders with all auth methods and error/message display</done>
</task>

<task type="auto">
  <name>Task 2: Create signup page</name>
  <files>app/(auth)/signup/page.tsx</files>
  <action>
Create app/(auth)/signup/page.tsx with:

1. **Layout**: Centered card matching login page style
2. **URL params**: Read `error` from searchParams
3. **Signup form**:
   - Email input (type="email", name="email", required)
   - Password input (type="password", name="password", required)
   - Submit button using `formAction={signup}`
4. **Link to login**: "Already have an account? Sign in"

Handle async searchParams:
```typescript
export default async function SignupPage({
  searchParams,
}: {
  searchParams: Promise<{ error?: string }>
}) {
  const { error } = await searchParams
  // ...
}
```

Import signup from '@/lib/actions/auth'.
Use same Card/Input/Button components as login page for consistency.
  </action>
  <verify>
```bash
test -f app/\(auth\)/signup/page.tsx && grep "formAction={signup}" app/\(auth\)/signup/page.tsx
```
  </verify>
  <done>Signup page renders with form and links to login</done>
</task>

<task type="auto">
  <name>Task 3: Create logout button component</name>
  <files>components/logout-button.tsx</files>
  <action>
Create components/logout-button.tsx as a client component:

```typescript
'use client'

import { logout } from '@/lib/actions/auth'
import { Button } from '@/components/ui/button'

export function LogoutButton() {
  return (
    <form action={logout}>
      <Button type="submit" variant="ghost">
        Sign Out
      </Button>
    </form>
  )
}
```

Key points:
- 'use client' directive (form action needs client component)
- Wraps logout action in form
- Uses ghost variant for subtle appearance in sidebars/headers
- Exported as named export for explicit imports
  </action>
  <verify>
```bash
test -f components/logout-button.tsx && grep "export function LogoutButton" components/logout-button.tsx
```
  </verify>
  <done>LogoutButton component exists and calls logout server action</done>
</task>

</tasks>

<verification>
All files exist:
```bash
ls -la app/\(auth\)/login/page.tsx app/\(auth\)/signup/page.tsx components/logout-button.tsx
```

Dev server runs without errors:
```bash
npm run dev &
sleep 5
curl -s http://localhost:3000/login | grep -q "Sign In" && echo "Login page OK"
curl -s http://localhost:3000/signup | grep -q "Sign Up" && echo "Signup page OK"
kill %1
```
</verification>

<success_criteria>
- /login page displays with email/password form, Google button, magic link option
- /signup page displays with email/password form
- Both pages show error/message from URL params
- LogoutButton component exported and ready for dashboard
- All forms use formAction to call server actions
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication/01-02-SUMMARY.md`
</output>
